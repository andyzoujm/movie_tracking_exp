<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <title>Video Annotation Project</title>
    <style type="text/css" media="screen">
      #consent #consentForm {
        width: 100%;
        height: 90%;
        resize: both;
        overflow: auto;
        margin-top: 5px;
        margin-left: 10px;
      }
      #instructionDoc {
        width: 100%;
        height: 90%;
        /*resize: both;*/
        overflow: auto;
        margin-top: 5px;
        margin-left: 10px;
      }
      .bottom-buffer { margin-bottom:10px; }
      .top-buffer { margin-top:10px; }

      #canvasContainer {
        position: relative;
        height: 90%;
      }
      #videoCanvas{
        position: absolute;
        z-index: 1;
        top:0;
        left:0;
      }
      #gridCanvas{
        position: absolute;
        z-index: 1;
        top:0;
        left:0;
      }
      #imageTrack{
        width: 50%;
        /*height:70%;*/
        margin-top: 5px;
        margin-left: 5px;
        margin-bottom: 5px;
        overflow: hidden;
      }
      .spaceText{
        font-size: 12pt;
      }
      .formLabel{
        font-size: 14pt;
      }
      .container{
        margin-right:5px;
        margin-left:5px;
        /*margin-top:5px;*/
        padding-right:5px; 
      }
      /*.page{
        width:1200px;
      }*/
      h3{
        margin-top:5px;
      }
      p{
        margin-bottom: 0px;
      }

    </style>
  </head>
  <body>
    <main class="container">
      <!-- Consent form page-->
      <div id="consent" class="page container">
        <div class='row bottom-buffer col-md-3'>
          <h3><u>Consent Form</u></h3>
          <input name="consent" onclick="Entrypoint.disableStart(false)" type="radio" value="yes" /> I agree<br />
          <input name="consent" onclick="Entrypoint.disableStart(true)" type="radio" value="no" /> I don&#39;t agree<br />
          <p class="spaceText"> Click 'I agree' then click 'Start' to begin. </p>
          <button disabled type="button" id="agreeAndStart" onclick="Entrypoint.showPage(1)" class="btn btn-lg btn-primary">Start</button>
        </div>
        <div class='row bottom-buffer col-md-9'>
          <p> These text has be to be visible. Don't scroll down the browser. Make it larger to fill the screen if necessary.</p>
          <iframe frameborder="1" id="consentForm" src="https://docs.google.com/document/d/1JXYorhDq0hhs4Z3Up8RtdBycP3XihQxEt180mNid978/pub?embedded=true"></iframe>
        </div>
      </div>

      <div id="before_start" class="page container">
          <!-- Starting page -->
          <h3><u>Before You Start</u></h3>
          <p class="spaceText"> Welcome! I am a graduate student in Prof. David Whitney's laboratory. The purpose of this experiment is to study how we perceive other people's emotion in a naturalistic setting. During this experiment, You will be asked to watch video clips and track the emotion of a chosen person in the presented video. Please try your best to infer and track his/her emotion and update your judgment in real time. </p>
          <p class="spaceText"> <b>GOOGLE CHROME IS REQUIRED.</b> The experiment may not work with other browsers.</p>
          <h4>Please read the following instructions carefully: </h4>
          <ul>
            <li><p class="spaceText">There are maximum <span class='totalNumber'> </span> trials/videos in this experiments. Finishing all videos might take about 60 minutes or more. We will record how much time you are active in our experiment. Please try to finish as many trials as you can in this 60 minutes. However, the most important thing is that you track the emotion accurately.</li>
            <li><p class="spaceText">Please pay full attention to the experiment. The quality of the data is very important to us. Pleaes don't use your cell phone or try to multi-task while doing the experiment. </p></li>
            <li><p class="spaceText">Please do not close the web page before you finish the experiment. If you accidentally exit the experiment, you can resume the experiment by entering your Berkeley email, and then the program will load your progress. </p></li>
            <li><p class="spaceText">Please do finish the whole experiment within <b>24 hours</b> after you signed up.</p></li>
            <li><p class="spaceText">You can receive full credits only if you participate for the full 60 minutes or complete all the trials. Your data will be kept confidential.</p></li>
          </ul>
          <p class="spaceText"> Please send an email to <b>chenzhimin@berkeley.edu</b> with a title <u><b>'Completed Emotion Experiment'</b></u> when you finish the whole experiment. We will verify your progress and the time you spent, and assign you credits in 1-2 days. If you encountered any problem or have any suggestion, also feel free to contact the researcher. We appreciate your feedback!</p>
          <p class="spaceText"> Click 'Next' to view the next page. </p>
          <!-- Navigation buttons -->
          <button id="next" type="button" onclick="Entrypoint.showPage(2)" class="btn btn-lg btn-primary">Next</button>
      </div>

      <div id="getInfo" class="page container">
        <div class='row bottom-buffer'>
          <h3><u> Participant Information </u></h3>
          <p class="spaceText">Please enter your Berkeley email as username. Please double check if your email address is correct before you submit. We use it for the purpose of granting RPP credits and saving progress.</p>
        </div>
        
        <form id='infoForm'>
          <div id="email" class="formField row bottom-buffer">
            <span class="formLabel" >Berkeley Email:</span>
            <input type="text" name="email" size="50" value="@berkeley.edu">
          </div>
          <div class="formField row bottom-buffer">
            <span class="formLabel">Age:</span>
            <input type="text" name="age">
          </div>
          <div class="formField row bottom-buffer">
            <span class="formLabel">Gender:</span>
            <select name="gender" ><option value=""></option><option value="0">Male</option><option value="1">Female</option> <option value="2">Other</option> </select>
          </div>
          <div class="formField row bottom-buffer">
            <span class="formLabel">Expected year of graduation:</span>
            <input type="text" name="yearsGraduate">
          </div>
        </form>
        <div class="row bottom-buffer">
          <p class="spaceText" id = "formText"> Please note that your information is handled as absolutely confedential. </p>
        </div>
        <button id="submitForm" type="button" class="btn btn-lg btn-primary">Submit</button>
      </div>

      <div id="instructions" class="page container">
        <div class='row bottom-buffer col-md-3'>
          <h3><u>Instructions</u></h3>
          <p class="spaceText"> Please read the document on the right carefully for instructions. Please make sure that you read all instructions by scrolling down to the bottom of the document. You will have at least 2 minutes to read. </p>
          <br/>
          <p class="spaceText"> Click the button to begin annotating the first video when you finish reading the instructions. </p> 
          <br/>
          <button disabled id="beginTrial" type="button" class="btn btn-lg btn-primary" >Begin the experiment</button>
        </div>
        <div class='row bottom-buffer col-md-9'>
          <p> These text has be to be visible. Don't scroll down the browser. Make it larger to fill the screen if necessary.</p>
          <iframe frameborder="1" id="instructionDoc" src="https://docs.google.com/document/d/e/2PACX-1vRnbe3dDQnNJk0_FBl16QTGf9rhlKZNBy5BI61yTNmXBuFXav6z_L7S09Q-XI-khVx5V8P6As9HuMby/pub?embedded=true"></iframe>
        </div>
      </div>

      <div id="annotation" class="page container">
        <div class='col-xs-4'>
          <h3>Trial <span id='trialNumber'></span> out of <span class='totalNumber'> </span> in total</h3>
          <div id='instructionsButton'>
              <a href="https://docs.google.com/document/d/1B86DZ3aon9Cw7EH6wOEYoz339kHx9f6iLfaHyHofWfo/edit?usp=sharing" class="btn btn-default" target="_blank">Click to view instructions again.</a>
          </div>
          <p class="spaceText"> The following character will be completely <b>occluded by a mask</b> and become invisible in the video. Please infer and track the real emotion of this character (but not the other characters) in the video <b>in real-time</b> based on the situation/environment this person is in. </p>
          <img id = 'imageTrack' src='img/Exp2_1.png'/>
         <!--  <div id = 'LoadingVideo'>
            <p class="spaceText"> The video is loading. Please wait a few seconds.</p>
          </div> -->
          <div id='VideoReady'>
            <p class="spaceText"> Please put your mouse pointer at the central cross and press the <b>ENTER</b> key to start. The video won't start until the mouse pointer is centered on the cross.</p>
          </div>
          <div id='VideoStart' hidden>
            <p class="spaceText"> The video has paused. Put the mouse point at the center cross and then press the <b>ENTER</b> key to start</p>
          </div>
          <div id='MovieInstruction' hidden>
            <p class="spaceText"> Please track the emotion <b>CLOSELY</b> and move the mouse <b>CONTINUOUSLY</b> </p>
          </div>
      </div>
        <div id='videoContainer' class='col-xs-8'>
          <div id='canvasContainer'>
            <p> These text has be to be visible. Don't scroll down the browser. Make it larger to fill the screen if necessary.</p>
            <div id='yt-player'></div>
            <canvas id='videoCanvas' ></canvas>
            <canvas id='gridCanvas'></canvas>
          </div>
        </div>
       
      </div>

      <div id="PostTrialSurvey" class="page container">
        <h3>Feedback</h3>
        <p class="spaceText" id="encourage1" hidden>You did a great job of tracking the emotion closely! </p>
        <p class="spaceText" id="encourage2" hidden>You did an excellent job of tracking closely! </p>
        <p class="spaceText" id="encourage3" hidden>Outstanding work! We appreciate your contribution. </p>
        <p class="spaceText" id="encourage4" hidden>Brilliant job! Please keep going. </p>
        <p class="spaceText" id="encourage5" hidden>Your continous tracking data is wonderful! Thank you! </p>
        <p class="spaceText" id="badJob1">The longest time you have not moved the red pointer is <b><span id='longestTimeStill'> </span> seconds </p></b>
        <p class="spaceText" id="badJob2" hidden>Your performance was not ideal. Please stay focused and track the emotion more closely.</p>
        <h3>Post-trial Survey</h3>
        <form id='surveyForm'>
          <div class="formField row bottom-buffer">
            <span class="formLabel"> Question 1: Have you ever watched this particular movie clip before participating in the experiment?</span>
            <select name="seenOrNot" ><option value=""></option><option value="0">Yes</option><option value="1">No</option> <option value="2">Not sure</option> </select>
          </div>
          <div class="formField row bottom-buffer">
            <span class="formLabel">Question 2: Please rate your level of familiarity towards the movie clip you just watched.</span>
            <select name="Familiarity" ><option value=""></option><option value="1">1-Not at all familiar</option><option value="2">2-Slightly familiar</option> <option value="3">3-Somewaht familiar</option> <option value="4">4-Moderately familiar</option><option value="5">5-Extremely familiar</option></select>
          </div>
          <div class="formField row bottom-buffer">
            <span class="formLabel">Question 3: Please rate how much do you like or enjoy this movie clip that you just watched</span>
            <select name="Likeness" ><option value=""></option><option value="1">1-Strongly dislike </option><option value="2">2-Somewhat dislike</option> <option value="3">3-Neutral</option> <option value="4">4-Somewhat like</option><option value="5">5-Strongly like</option></select>
          </div>
          <button id="submitTrial" type="button" class="btn btn-lg btn-primary">Next trial</button>
        </div>

      <div id="EndingExp" class="page container">
        <h3><u>You have finished the experiment!</u></h3>
        <p class="spaceText"> Thank you so much!</p>
        <p class="spaceText"> Please send an email to <b>chenzhimin@berkeley.edu</b> with a title <u><b>'Completed Emotion Experiment'</b></u>. We will verify your progress and the time you spent, and assign you credits in 1-2 days. If you encountered any problem or have any suggestion, also feel free to contact the researcher. We appreciate your feedback!</p>
        <p class="spaceText"> You can close the web page now.</p> 
      </div>

    </main>
  </body>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/core-js/2.1.4/core.min.js"></script>
  <script type="text/javascript" src="bundle.js"></script>


</html>
